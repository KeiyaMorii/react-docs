# React要素とコンポーネント要素の違い

以下では、Reactで頻出する「React要素（React Element）」と「コンポーネント要素（Component Element）」の違いを、生成タイミングや内部構造、用途の観点から比較します。

---

## 1. 定義

### React要素（React Element）
- **概要**: `React.createElement()` や JSX を通じて生成される、不変（immutable）な **JavaScriptオブジェクト**。  
- **役割**: 仮想DOMの最小単位として、要素タイプ・属性（props）・子要素情報を保持。  
- **例**:

```
const element = <h1 className="title">Hello</h1>;
// ↓ Babel変換後
React.createElement("h1", { className: "title" }, "Hello");
```

### コンポーネント要素（Component Element）
- **概要**: Reactコンポーネント（関数コンポーネント or クラスコンポーネント）を **要素として扱った**もの。  
- **役割**: 複数のReact要素やロジックを組み合わせた「カスタムタグ」。再利用可能な UI 部品として振る舞う。  
- **例**:

```
function Greeting(props) {
return <h1>Hello, {props.name}</h1>;
}
// コンポーネント要素としての使用
const comp = <Greeting name="Alice" />;
```

---

## 2. 生成タイミング

|                 | React要素                               | コンポーネント要素                          |
|-----------------|----------------------------------------|--------------------------------------------|
| **生成関数**    | `React.createElement()` または JSX     | 同上（内部でコンポーネント関数／クラスが呼ばれる） |
| **ライフサイクル** | 生成後は不変。再レンダーごとに新規オブジェクト生成 | マウント・更新・アンマウントなどのライフサイクルを持つ  |
| **呼び出し先**  | HTMLタグ名（`'div'`, `'span'` etc.）    | コンポーネント名（`Greeting` など）         |

---

## 3. 内部構造の違い

### React要素

```
{
type: "h1", // 要素タイプ（HTMLタグ）
props: { // 属性と子要素情報
className: "title",
children: "Hello"
},
key: null, // リスト中の識別子
ref: null // 参照用
}
```


### コンポーネント要素

```
{
type: Greeting, // 要素タイプがコンポーネント関数／クラス
props: { // コンポーネントに渡す props
name: "Alice"
},
key: null,
ref: null
}
```

- `type` が **関数 or クラス** なのが最大の特徴。  
- Reactは最終的にこのコンポーネントを呼び出し、戻り値として別のReact要素ツリーを受け取る。

---

## 4. 用途・振る舞いの違い

|                    | React要素                              | コンポーネント要素                       |
|--------------------|---------------------------------------|-----------------------------------------|
| **再利用性**       | 単一のタグ or テキスト単体              | ロジック・UIをまとめた再利用可能単位       |
| **状態管理**       | なし                                  | Hooksや`this.state`による内部状態管理可能 |
| **副作用**         | なし                                  | `useEffect`やライフサイクルメソッドで対応  |
| **抽象化レベル**   | 低レベル（HTMLタグ相当）                | 高レベル（ドメイン／機能単位で抽象化）     |

---

## 5. まとめ

- **React要素**は「タグやテキスト単位」の仮想DOMノードを表す不変オブジェクト。  
- **コンポーネント要素**は「関数やクラスとして定義された再利用可能な部品」を要素として扱うもので、内部でさらにReact要素を生成・組み合わせる。  

Markdownでまとめたこの違いをもとに、JSXやReact.createElementを使ったコーディング時に「どちらを生成しているのか」を意識してみてください。  
